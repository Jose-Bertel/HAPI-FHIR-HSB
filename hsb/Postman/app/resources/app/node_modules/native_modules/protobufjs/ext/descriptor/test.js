"use strict";var protobuf=require("../../"),descriptor=require("."),root=protobuf.loadSync("tests/data/google/protobuf/descriptor.proto").resolveAll(),msg=root.toDescriptor(),buf=descriptor.FileDescriptorSet.encode(msg).finish(),root2=protobuf.Root.fromDescriptor(buf,"proto2").resolveAll(),diff=require("deep-diff").diff(root.toJSON(),root2.toJSON());diff?(diff.forEach(function(o){console.log(o.kind+" @ "+o.path.join(".")),console.log("lhs:",typeof o.lhs,o.lhs),console.log("rhs:",typeof o.rhs,o.rhs),console.log()}),process.exitCode=1):console.log("no differences");