"use strict";var $protobuf=require("../..");module.exports=exports=$protobuf.descriptor=$protobuf.Root.fromJSON(require("../../google/protobuf/descriptor.json")).lookup(".google.protobuf");var Namespace=$protobuf.Namespace,Root=$protobuf.Root,Enum=$protobuf.Enum,Type=$protobuf.Type,Field=$protobuf.Field,MapField=$protobuf.MapField,OneOf=$protobuf.OneOf,Service=$protobuf.Service,Method=$protobuf.Method;function Root_toDescriptorRecursive(e,t,r){var o=exports.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});r&&(o.syntax=r),e instanceof Root||(o.package=e.fullName.substring(1));for(var s,n=0;n<e.nestedArray.length;++n)(s=e._nestedArray[n])instanceof Type?o.messageType.push(s.toDescriptor(r)):s instanceof Enum?o.enumType.push(s.toDescriptor()):s instanceof Field?o.extension.push(s.toDescriptor(r)):s instanceof Service?o.service.push(s.toDescriptor()):s instanceof Namespace&&Root_toDescriptorRecursive(s,t,r);o.options=toDescriptorOptions(e.options,exports.FileOptions),o.messageType.length+o.enumType.length+o.extension.length+o.service.length&&t.push(o)}Root.fromDescriptor=function(e,t){"number"==typeof e.length&&(e=exports.FileDescriptorSet.decode(e));var r=new Root;if(e.file)for(var o,s,n,i=0;i<e.file.length;++i){if(s=r,(o=e.file[i]).package&&o.package.length&&(s=r.define(o.package)),o.name&&o.name.length&&r.files.push(s.filename=o.name),o.messageType)for(n=0;n<o.messageType.length;++n)s.add(Type.fromDescriptor(o.messageType[n],o.syntax,t));if(o.enumType)for(n=0;n<o.enumType.length;++n)s.add(Enum.fromDescriptor(o.enumType[n]));if(o.extension)for(n=0;n<o.extension.length;++n)s.add(Field.fromDescriptor(o.extension[n]));if(o.service)for(n=0;n<o.service.length;++n)s.add(Service.fromDescriptor(o.service[n]));var p=fromDescriptorOptions(o.options,exports.FileOptions);if(p){var a=Object.keys(p);for(n=0;n<a.length;++n)s.setOption(a[n],p[a[n]])}}return r},Root.prototype.toDescriptor=function(e){var t=exports.FileDescriptorSet.create();return Root_toDescriptorRecursive(this,t.file,e),t};var unnamedMessageIndex=0;Type.fromDescriptor=function(e,t,r){"number"==typeof e.length&&(e=exports.DescriptorProto.decode(e));var o,s=new Type(e.name.length?e.name:"Type"+unnamedMessageIndex++,fromDescriptorOptions(e.options,exports.MessageOptions)),n=r&&r.useMapField;if(e.oneofDecl)for(o=0;o<e.oneofDecl.length;++o)s.add(OneOf.fromDescriptor(e.oneofDecl[o]));if(e.field)for(o=0;o<e.field.length;++o){var i=n&&e.nestedType?e.nestedType.find(function(t){var r=e.field[o],s=r.typeName&&r.typeName.split(".").pop();return t.options&&t.options.mapEntry&&t.name===s}):null,p=i?MapField.fromDescriptor(e.field[o],i,t):Field.fromDescriptor(e.field[o],t);s.add(p),e.field[o].hasOwnProperty("oneofIndex")&&s.oneofsArray[e.field[o].oneofIndex].add(p)}if(e.extension)for(o=0;o<e.extension.length;++o)s.add(Field.fromDescriptor(e.extension[o],t));if(e.nestedType)for(o=0;o<e.nestedType.length;++o)n?e.nestedType[o].options&&e.nestedType[o].options.mapEntry||s.add(Type.fromDescriptor(e.nestedType[o],t,r)):(s.add(Type.fromDescriptor(e.nestedType[o],t,r)),e.nestedType[o].options&&e.nestedType[o].options.mapEntry&&s.setOption("map_entry",!0));if(e.enumType)for(o=0;o<e.enumType.length;++o)s.add(Enum.fromDescriptor(e.enumType[o]));if(e.extensionRange&&e.extensionRange.length)for(o=0,s.extensions=[];o<e.extensionRange.length;++o)s.extensions.push([e.extensionRange[o].start,e.extensionRange[o].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(s.reserved=[],e.reservedRange)for(o=0;o<e.reservedRange.length;++o)s.reserved.push([e.reservedRange[o].start,e.reservedRange[o].end]);if(e.reservedName)for(o=0;o<e.reservedName.length;++o)s.reserved.push(e.reservedName[o])}return s},Type.prototype.toDescriptor=function(e){var t,r,o=exports.DescriptorProto.create({name:this.name});for(r=0;r<this.fieldsArray.length;++r)if(o.field.push(t=this._fieldsArray[r].toDescriptor(e)),this._fieldsArray[r]instanceof MapField){var s=toDescriptorType(this._fieldsArray[r].keyType,this._fieldsArray[r].resolvedKeyType),n=toDescriptorType(this._fieldsArray[r].type,this._fieldsArray[r].resolvedType),i=11===n||14===n?this._fieldsArray[r].resolvedType&&shortname(this.parent,this._fieldsArray[r].resolvedType)||this._fieldsArray[r].type:void 0;o.nestedType.push(exports.DescriptorProto.create({name:t.typeName,field:[exports.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),exports.FieldDescriptorProto.create({name:"value",number:2,label:1,type:n,typeName:i})],options:exports.MessageOptions.create({mapEntry:!0})}))}for(r=0;r<this.oneofsArray.length;++r)o.oneofDecl.push(this._oneofsArray[r].toDescriptor());for(r=0;r<this.nestedArray.length;++r)this._nestedArray[r]instanceof Field?o.field.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof Type?o.nestedType.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof Enum&&o.enumType.push(this._nestedArray[r].toDescriptor());if(this.extensions)for(r=0;r<this.extensions.length;++r)o.extensionRange.push(exports.DescriptorProto.ExtensionRange.create({start:this.extensions[r][0],end:this.extensions[r][1]}));if(this.reserved)for(r=0;r<this.reserved.length;++r)"string"==typeof this.reserved[r]?o.reservedName.push(this.reserved[r]):o.reservedRange.push(exports.DescriptorProto.ReservedRange.create({start:this.reserved[r][0],end:this.reserved[r][1]}));return o.options=toDescriptorOptions(this.options,exports.MessageOptions),o};var numberRe=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;Field.fromDescriptor=function(e,t){if("number"==typeof e.length&&(e=exports.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");switch(r=e.typeName&&e.typeName.length?e.typeName:fromDescriptorType(e.type),e.label){case 1:o=void 0;break;case 2:o="required";break;case 3:o="repeated";break;default:throw Error("illegal label: "+e.label)}var r,o,s=e.extendee;void 0!==e.extendee&&(s=s.length?s:void 0);var n=new Field(e.name.length?e.name:"field"+e.number,e.number,r,o,s);if(n.options=fromDescriptorOptions(e.options,exports.FieldOptions),e.defaultValue&&e.defaultValue.length){var i=e.defaultValue;switch(i){case"true":case"TRUE":i=!0;break;case"false":case"FALSE":i=!1;break;default:numberRe.exec(i)&&(i=parseInt(i))}n.setOption("default",i)}return packableDescriptorType(e.type)&&("proto3"===t?e.options&&!e.options.packed&&n.setOption("packed",!1):e.options&&e.options.packed||n.setOption("packed",!1)),n},Field.prototype.toDescriptor=function(e){var t=exports.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)t.type=11,t.typeName=$protobuf.util.ucFirst(this.name),t.label=3;else{switch(t.type=toDescriptorType(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:t.typeName=this.resolvedType?shortname(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":t.label=3;break;case"required":t.label=2;break;default:t.label=1}}if(t.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(t.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(t.options=toDescriptorOptions(this.options,exports.FieldOptions),null!=this.options.default&&(t.defaultValue=String(this.options.default))),"proto3"===e?this.packed||((t.options||(t.options=exports.FieldOptions.create())).packed=!1):this.packed&&((t.options||(t.options=exports.FieldOptions.create())).packed=!0),t},MapField.fromDescriptor=function(e,t){if("number"==typeof e.length&&(e=exports.DescriptorProto.decode(e)),"number"==typeof t.length&&(t=exports.DescriptorProto.decode(t)),"number"!=typeof e.number)throw Error("missing field id");var r=t.field[1].typeName,o=r&&r.length?r:fromDescriptorType(t.field[1].type),s=new MapField(e.name.length?e.name:"field"+e.number,e.number,fromDescriptorType(t.field[0].type),o,fromDescriptorOptions(e.options,exports.FieldOptions)),n=e.extendee;if(void 0!==n&&(s.extend=n.length?n:void 0),e.defaultValue&&e.defaultValue.length){var i=e.defaultValue;switch(i){case"true":case"TRUE":i=!0;break;case"false":case"FALSE":i=!1;break;default:numberRe.exec(i)&&(i=parseInt(i))}s.setOption("default",i)}return s};var unnamedEnumIndex=0;Enum.fromDescriptor=function(e){"number"==typeof e.length&&(e=exports.EnumDescriptorProto.decode(e));var t={};if(e.value)for(var r=0;r<e.value.length;++r){var o=e.value[r].name,s=e.value[r].number||0;t[o&&o.length?o:"NAME"+s]=s}return new Enum(e.name&&e.name.length?e.name:"Enum"+unnamedEnumIndex++,t,fromDescriptorOptions(e.options,exports.EnumOptions))},Enum.prototype.toDescriptor=function(){for(var e=[],t=0,r=Object.keys(this.values);t<r.length;++t)e.push(exports.EnumValueDescriptorProto.create({name:r[t],number:this.values[r[t]]}));return exports.EnumDescriptorProto.create({name:this.name,value:e,options:toDescriptorOptions(this.options,exports.EnumOptions)})};var unnamedOneofIndex=0;OneOf.fromDescriptor=function(e){return"number"==typeof e.length&&(e=exports.OneofDescriptorProto.decode(e)),new OneOf(e.name&&e.name.length?e.name:"oneof"+unnamedOneofIndex++)},OneOf.prototype.toDescriptor=function(){return exports.OneofDescriptorProto.create({name:this.name})};var unnamedServiceIndex=0;Service.fromDescriptor=function(e){"number"==typeof e.length&&(e=exports.ServiceDescriptorProto.decode(e));var t=new Service(e.name&&e.name.length?e.name:"Service"+unnamedServiceIndex++,fromDescriptorOptions(e.options,exports.ServiceOptions));if(e.method)for(var r=0;r<e.method.length;++r)t.add(Method.fromDescriptor(e.method[r]));return t},Service.prototype.toDescriptor=function(){for(var e=[],t=0;t<this.methodsArray.length;++t)e.push(this._methodsArray[t].toDescriptor());return exports.ServiceDescriptorProto.create({name:this.name,method:e,options:toDescriptorOptions(this.options,exports.ServiceOptions)})};var unnamedMethodIndex=0;function fromDescriptorType(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function packableDescriptorType(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function toDescriptorType(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof Enum)return 14;if(t instanceof Type)return t.group?10:11;throw Error("illegal type: "+e)}function fromDescriptorOptions(e,t){if(e){for(var r,o,s,n=[],i=0;i<t.fieldsArray.length;++i)"uninterpretedOption"!==(o=(r=t._fieldsArray[i]).name)&&e.hasOwnProperty(o)&&(s=e[o],r.resolvedType instanceof Enum&&"number"==typeof s&&void 0!==r.resolvedType.valuesById[s]&&(s=r.resolvedType.valuesById[s]),n.push(underScore(o),s));return n.length?$protobuf.util.toObject(n):void 0}}function toDescriptorOptions(e,t){if(e){for(var r,o,s=[],n=0,i=Object.keys(e);n<i.length;++n)if(o=e[r=i[n]],"default"!==r){var p=t.fields[r];(p||(p=t.fields[r=$protobuf.util.camelCase(r)]))&&s.push(r,o)}return s.length?t.fromObject($protobuf.util.toObject(s)):void 0}}function shortname(e,t){var r=e.fullName.split("."),o=t.fullName.split("."),s=0,n=0,i=o.length-1;if(!(e instanceof Root)&&t instanceof Namespace)for(;s<r.length&&n<i&&r[s]===o[n];){var p=t.lookup(r[s++],!0);if(null!==p&&p!==t)break;++n}else for(;s<r.length&&n<i&&r[s]===o[n];++s,++n);return o.slice(n).join(".")}function underScore(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}Method.fromDescriptor=function(e){return"number"==typeof e.length&&(e=exports.MethodDescriptorProto.decode(e)),new Method(e.name&&e.name.length?e.name:"Method"+unnamedMethodIndex++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,fromDescriptorOptions(e.options,exports.MethodOptions))},Method.prototype.toDescriptor=function(){return exports.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:toDescriptorOptions(this.options,exports.MethodOptions)})};